<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ふるさと納税 × 住宅ローン控除（v7）</title>
  <meta name="description" content="年収700万円以上・住宅ローンありの方向け。都道府県考慮の上限試算ツール。" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
<header class="wrap topbar">
  <h1>ふるさと納税 × 住宅ローン控除</h1>
  <nav class="tabs">
    <button data-tab="simple" class="active">簡易</button>
    <button data-tab="precise">精確</button>
    <button data-tab="plain">ローンなし</button>
  </nav>
<div id="compatWarn" class="wrap" style="display:none;margin-top:8px">
  <div style="background:#fff3cd;border:1px solid #ffe58f;padding:8px 12px;border-radius:8px;color:#664d03;font-size:14px">
    お使いのブラウザは一部の機能（CSS Grid 等）に対応していません。表示を簡易モードで提供します。最新の Chrome / Safari / Edge / Firefox を推奨します。
  </div>
</div>
</header>

<main class="wrap">
  <!-- 簡易 -->
  <section id="tab-simple" class="tab active">
    <div class="lead">年収700万円以上・住宅ローンありの方向けに最適化。</div>
    <div class="grid">
      <div class="field">
        <div class="label-row">
          <span class="title">居住地（都道府県）</span><span class="meta"><span class="req">必須</span></span>
        </div>
        <select id="s1-pref">
<option value="北海道">北海道</option>
<option value="青森県">青森県</option>
<option value="岩手県">岩手県</option>
<option value="宮城県">宮城県</option>
<option value="秋田県">秋田県</option>
<option value="山形県">山形県</option>
<option value="福島県">福島県</option>
<option value="茨城県">茨城県</option>
<option value="栃木県">栃木県</option>
<option value="群馬県">群馬県</option>
<option value="埼玉県">埼玉県</option>
<option value="千葉県">千葉県</option>
<option value="東京都">東京都</option>
<option value="神奈川県">神奈川県</option>
<option value="新潟県">新潟県</option>
<option value="富山県">富山県</option>
<option value="石川県">石川県</option>
<option value="福井県">福井県</option>
<option value="山梨県">山梨県</option>
<option value="長野県">長野県</option>
<option value="岐阜県">岐阜県</option>
<option value="静岡県">静岡県</option>
<option value="愛知県">愛知県</option>
<option value="三重県">三重県</option>
<option value="滋賀県">滋賀県</option>
<option value="京都府">京都府</option>
<option value="大阪府">大阪府</option>
<option value="兵庫県">兵庫県</option>
<option value="奈良県">奈良県</option>
<option value="和歌山県">和歌山県</option>
<option value="鳥取県">鳥取県</option>
<option value="島根県">島根県</option>
<option value="岡山県">岡山県</option>
<option value="広島県">広島県</option>
<option value="山口県">山口県</option>
<option value="徳島県">徳島県</option>
<option value="香川県">香川県</option>
<option value="愛媛県">愛媛県</option>
<option value="高知県">高知県</option>
<option value="福岡県">福岡県</option>
<option value="佐賀県">佐賀県</option>
<option value="長崎県">長崎県</option>
<option value="熊本県">熊本県</option>
<option value="大分県">大分県</option>
<option value="宮崎県">宮崎県</option>
<option value="鹿児島県">鹿児島県</option>
<option value="沖縄県">沖縄県</option>
</select>
        <div class="note">一部自治体では所得割に微小な上乗せがあります（自動反映）。</div>
      </div>

      <div class="field"><div class="label-row"><span class="title">年収</span><span class="meta"><span class="req">必須</span><span class="unit">万円</span></span></div>
        <input id="s1-salary" inputmode="numeric" placeholder="例：700" /></div>
      <div class="field"><div class="label-row"><span class="title">年齢</span><span class="meta"><span class="req">必須</span></span></div>
        <input id="s1-age" inputmode="numeric" placeholder="例：38" /></div>

      <div class="field"><div class="label-row"><span class="title">借入開始（年）</span><span class="meta"><span class="req">必須</span></span></div>
        <input id="s1-start-y" inputmode="numeric" placeholder="例：2023" /></div>
      <div class="field"><div class="label-row"><span class="title">借入開始（月）</span><span class="meta"><span class="req">必須</span></span></div>
        <input id="s1-start-m" inputmode="numeric" placeholder="例：10" /></div>
      <div class="field"><div class="label-row"><span class="title">借入総額</span><span class="meta"><span class="req">必須</span><span class="unit">万円</span></span></div>
        <input id="s1-principal" inputmode="numeric" placeholder="例：4500" /></div>
      <div class="field"><div class="label-row"><span class="title">返済年数</span><span class="meta"><span class="req">必須</span><span class="unit">年</span></span></div>
        <input id="s1-years" inputmode="numeric" placeholder="例：35" /></div>
      <div class="field"><div class="label-row"><span class="title">年利</span><span class="meta"><span class="req">必須</span><span class="unit">%</span></span></div>
        <input id="s1-rate" inputmode="decimal" placeholder="例：0.9" /></div>
      <div class="field"><div class="label-row"><span class="title">利息計算方式</span><span class="meta"><span class="req">必須</span></span></div>
        <select id="s1-method"><option>元利均等</option><option>元金均等</option></select></div>

      <div class="field">
        <div class="label-row tip-row">
          <span class="title">住宅区分</span>
          <span class="meta"><span class="req">必須</span><span class="q" data-tip="認定：長期優良・低炭素。ZEH：ゼロエネルギー。省エネ：基準適合。その他：上記以外。">?</span></span>
        </div>
        <select id="s1-cat">
          <option value="認定">認定</option>
          <option value="ZEH">ZEH</option>
          <option value="省エネ" selected>省エネ</option>
          <option value="その他">その他</option>
        </select>
      </div>
      <div class="field"><div class="label-row"><span class="title">新築 / 中古</span><span class="meta"><span class="req">必須</span></span></div>
        <select id="s1-newused"><option>新築</option><option>中古</option></select></div>
      <div class="field">
        <div class="label-row">
          <span class="title">子育て・若者夫婦（任意）</span>
          <span class="meta"><label class="switch nowrap"><input type="checkbox" id="s1-child"><span>適用する</span></label></span>
        </div>
      </div>

      <div class="field"><div class="label-row"><span class="title">対象年（計算年）</span><span class="meta"><span class="req">必須</span></span></div>
        <input id="s1-target-y" inputmode="numeric" placeholder="例：2025" /></div>

      <div class="field"><div class="label-row"><span class="title">市区町村の超過課税（所得割・任意）</span><span class="meta"><span class="unit">％</span></span></div>
        <input id="s1-muni-extra" inputmode="decimal" placeholder="例：0.10（豊岡市など）" /></div>
    </div>

    <div class="actions"><button id="s1-calc">上限を計算</button></div>
    <div id="s1-summary" class="summary"></div>
    <div id="s1-out" class="result"></div>
  </section>

  <!-- 精確 -->
  <section id="tab-precise" class="tab">
    <div class="lead">e-Taxが無くても都道府県考慮で推定。必要に応じて手入力に切替できます。</div>
    <div class="grid">
      <div class="field"><div class="label-row"><span class="title">居住地（都道府県）</span><span class="meta"><span class="req">必須</span></span></div>
        <select id="s2-pref">
<option value="北海道">北海道</option>
<option value="青森県">青森県</option>
<option value="岩手県">岩手県</option>
<option value="宮城県">宮城県</option>
<option value="秋田県">秋田県</option>
<option value="山形県">山形県</option>
<option value="福島県">福島県</option>
<option value="茨城県">茨城県</option>
<option value="栃木県">栃木県</option>
<option value="群馬県">群馬県</option>
<option value="埼玉県">埼玉県</option>
<option value="千葉県">千葉県</option>
<option value="東京都">東京都</option>
<option value="神奈川県">神奈川県</option>
<option value="新潟県">新潟県</option>
<option value="富山県">富山県</option>
<option value="石川県">石川県</option>
<option value="福井県">福井県</option>
<option value="山梨県">山梨県</option>
<option value="長野県">長野県</option>
<option value="岐阜県">岐阜県</option>
<option value="静岡県">静岡県</option>
<option value="愛知県">愛知県</option>
<option value="三重県">三重県</option>
<option value="滋賀県">滋賀県</option>
<option value="京都府">京都府</option>
<option value="大阪府">大阪府</option>
<option value="兵庫県">兵庫県</option>
<option value="奈良県">奈良県</option>
<option value="和歌山県">和歌山県</option>
<option value="鳥取県">鳥取県</option>
<option value="島根県">島根県</option>
<option value="岡山県">岡山県</option>
<option value="広島県">広島県</option>
<option value="山口県">山口県</option>
<option value="徳島県">徳島県</option>
<option value="香川県">香川県</option>
<option value="愛媛県">愛媛県</option>
<option value="高知県">高知県</option>
<option value="福岡県">福岡県</option>
<option value="佐賀県">佐賀県</option>
<option value="長崎県">長崎県</option>
<option value="熊本県">熊本県</option>
<option value="大分県">大分県</option>
<option value="宮崎県">宮崎県</option>
<option value="鹿児島県">鹿児島県</option>
<option value="沖縄県">沖縄県</option>
</select></div>

      <div class="field"><div class="label-row"><span class="title">年収</span><span class="meta"><span class="req">必須</span><span class="unit">万円</span></span></div>
        <input id="s2-salary" inputmode="numeric" placeholder="例：900" /></div>
      <div class="field"><div class="label-row"><span class="title">年齢</span><span class="meta"><span class="req">必須</span></span></div>
        <input id="s2-age" inputmode="numeric" placeholder="例：40" /></div>

      <div class="field"><div class="label-row"><span class="title">借入開始（年）</span><span class="meta"><span class="req">必須</span></span></div>
        <input id="s2-start-y" inputmode="numeric" placeholder="例：2022" /></div>
      <div class="field"><div class="label-row"><span class="title">借入開始（月）</span><span class="meta"><span class="req">必須</span></span></div>
        <input id="s2-start-m" inputmode="numeric" placeholder="例：7" /></div>
      <div class="field"><div class="label-row"><span class="title">借入総額</span><span class="meta"><span class="req">必須</span><span class="unit">万円</span></span></div>
        <input id="s2-principal" inputmode="numeric" placeholder="例：6000" /></div>
      <div class="field"><div class="label-row"><span class="title">返済年数</span><span class="meta"><span class="req">必須</span><span class="unit">年</span></span></div>
        <input id="s2-years" inputmode="numeric" placeholder="例：35" /></div>
      <div class="field"><div class="label-row"><span class="title">年利</span><span class="meta"><span class="req">必須</span><span class="unit">%</span></span></div>
        <input id="s2-rate" inputmode="decimal" placeholder="例：0.8" /></div>
      <div class="field"><div class="label-row"><span class="title">利息計算方式</span><span class="meta"><span class="req">必須</span></span></div>
        <select id="s2-method"><option>元利均等</option><option>元金均等</option></select></div>

      <div class="field">
        <div class="label-row tip-row">
          <span class="title">住宅区分</span>
          <span class="meta"><span class="req">必須</span><span class="q" data-tip="認定：長期優良・低炭素。ZEH：ゼロエネ。省エネ：適合。その他：上記以外。">?</span></span>
        </div>
        <select id="s2-cat">
          <option value="認定">認定</option>
          <option value="ZEH">ZEH</option>
          <option value="省エネ" selected>省エネ</option>
          <option value="その他">その他</option>
        </select>
      </div>
      <div class="field"><div class="label-row"><span class="title">新築 / 中古</span><span class="meta"><span class="req">必須</span></span></div>
        <select id="s2-newused"><option>新築</option><option>中古</option></select></div>
      <div class="field">
        <div class="label-row">
          <span class="title">子育て・若者夫婦（任意）</span>
          <span class="meta"><label class="switch nowrap"><input type="checkbox" id="s2-child"><span>適用する</span></label></span>
        </div>
      </div>

      <div class="field"><div class="label-row"><span class="title">対象年（計算年）</span><span class="meta"><span class="req">必須</span></span></div>
        <input id="s2-target-y" inputmode="numeric" placeholder="例：2025" /></div>

      <div class="field">
        <div class="label-row">
          <span class="title">年末残高（自動計算）</span>
          <span class="meta"><span class="unit">円</span><label class="toggle nowrap">手入力<input type="checkbox" id="s2-yb-manual"></label></span>
        </div>
        <input id="s2-yearend-auto" placeholder="自動計算…" disabled />
        <input id="s2-yearend-man" placeholder="例：3200（万円）" class="alt" style="display:none" />
        <div class="note">※ 借入情報から12月末時点の概算。手入力では証明書の値（万円）を直接設定できます。</div>
      </div>

      <div class="field">
        <div class="label-row">
          <span class="title">住民税所得割額（自動計算・調整控除前相当）</span>
          <span class="meta"><span class="unit">円</span><label class="toggle nowrap">手入力<input type="checkbox" id="s2-R-manual"></label></span>
        </div>
        <input id="s2-R-auto" placeholder="自動計算…" disabled />
        <input id="s2-R-man" placeholder="例：50（万円）" class="alt" style="display:none" />
        <div class="note">※ 都道府県の所得割率＋（任意）市区町村の上乗せを考慮した概算。e-Tax数値で上書き可。</div>
      </div>

      <div class="field"><div class="label-row"><span class="title">市区町村の超過課税（所得割・任意）</span><span class="meta"><span class="unit">％</span></span></div>
        <input id="s2-muni-extra" inputmode="decimal" placeholder="例：0.10（豊岡市など）" /></div>

      <div class="field"><div class="label-row"><span class="title">不動産所得（任意）</span><span class="meta"><span class="unit">万円</span></span></div>
        <input id="s2-real" inputmode="numeric" placeholder="例：-30" /></div>
      <div class="field"><div class="label-row"><span class="title">事業・雑所得（任意）</span><span class="meta"><span class="unit">万円</span></span></div>
        <input id="s2-side" inputmode="numeric" placeholder="例：50" /></div>
      <div class="field"><div class="label-row"><span class="title">所得税額（控除前・任意）</span><span class="meta"><span class="unit">万円</span></span></div>
        <input id="s2-itax" inputmode="numeric" placeholder="例：160" /></div>
    </div>

    <div class="actions"><button id="s2-calc">上限を計算</button></div>
    <div id="s2-summary" class="summary"></div>
    <div id="s2-out" class="result"></div>
  </section>

  <!-- ローンなし -->
  <section id="tab-plain" class="tab">
    <div class="lead">ローンが無い場合。都道府県・（任意）市区町村上乗せを考慮。</div>
    <div class="grid">
      <div class="field"><div class="label-row"><span class="title">居住地（都道府県）</span><span class="meta"><span class="req">必須</span></span></div>
        <select id="s3-pref">
<option value="北海道">北海道</option>
<option value="青森県">青森県</option>
<option value="岩手県">岩手県</option>
<option value="宮城県">宮城県</option>
<option value="秋田県">秋田県</option>
<option value="山形県">山形県</option>
<option value="福島県">福島県</option>
<option value="茨城県">茨城県</option>
<option value="栃木県">栃木県</option>
<option value="群馬県">群馬県</option>
<option value="埼玉県">埼玉県</option>
<option value="千葉県">千葉県</option>
<option value="東京都">東京都</option>
<option value="神奈川県">神奈川県</option>
<option value="新潟県">新潟県</option>
<option value="富山県">富山県</option>
<option value="石川県">石川県</option>
<option value="福井県">福井県</option>
<option value="山梨県">山梨県</option>
<option value="長野県">長野県</option>
<option value="岐阜県">岐阜県</option>
<option value="静岡県">静岡県</option>
<option value="愛知県">愛知県</option>
<option value="三重県">三重県</option>
<option value="滋賀県">滋賀県</option>
<option value="京都府">京都府</option>
<option value="大阪府">大阪府</option>
<option value="兵庫県">兵庫県</option>
<option value="奈良県">奈良県</option>
<option value="和歌山県">和歌山県</option>
<option value="鳥取県">鳥取県</option>
<option value="島根県">島根県</option>
<option value="岡山県">岡山県</option>
<option value="広島県">広島県</option>
<option value="山口県">山口県</option>
<option value="徳島県">徳島県</option>
<option value="香川県">香川県</option>
<option value="愛媛県">愛媛県</option>
<option value="高知県">高知県</option>
<option value="福岡県">福岡県</option>
<option value="佐賀県">佐賀県</option>
<option value="長崎県">長崎県</option>
<option value="熊本県">熊本県</option>
<option value="大分県">大分県</option>
<option value="宮崎県">宮崎県</option>
<option value="鹿児島県">鹿児島県</option>
<option value="沖縄県">沖縄県</option>
</select></div>

      <div class="field"><div class="label-row"><span class="title">年収</span><span class="meta"><span class="req">必須</span><span class="unit">万円</span></span></div>
        <input id="s3-salary" inputmode="numeric" placeholder="例：700" /></div>
      <div class="field"><div class="label-row"><span class="title">年齢</span><span class="meta"><span class="req">必須</span></span></div>
        <input id="s3-age" inputmode="numeric" placeholder="例：38" /></div>

      <div class="field">
        <div class="label-row">
          <span class="title">住民税所得割額（自動計算・調整控除前相当）</span>
          <span class="meta"><span class="unit">円</span><label class="toggle nowrap">手入力<input type="checkbox" id="s3-R-manual"></label></span>
        </div>
        <input id="s3-R-auto" placeholder="自動計算…" disabled />
        <input id="s3-R-man" placeholder="例：50（万円）" class="alt" style="display:none" />
      </div>

      <div class="field"><div class="label-row"><span class="title">市区町村の超過課税（所得割・任意）</span><span class="meta"><span class="unit">％</span></span></div>
        <input id="s3-muni-extra" inputmode="decimal" placeholder="例：0.10" /></div>

      <div class="field"><div class="label-row"><span class="title">不動産所得（任意）</span><span class="meta"><span class="unit">万円</span></span></div>
        <input id="s3-real" inputmode="numeric" placeholder="例：-20" /></div>
      <div class="field"><div class="label-row"><span class="title">事業・雑所得（任意）</span><span class="meta"><span class="unit">万円</span></span></div>
        <input id="s3-side" inputmode="numeric" placeholder="例：30" /></div>
    </div>

    <div class="actions"><button id="s3-calc">上限を計算</button></div>
    <div id="s3-summary" class="summary"></div>
    <div id="s3-out" class="result"></div>
  </section>
</main>

<footer class="wrap foot">
  <small>最終更新：<span id="last"></span> ／ © <span id="year"></span></small>
</footer>

<script src="app.js"></script>
<script>
document.getElementById('last').textContent = new Date().toISOString().slice(0,10);
document.getElementById('year').textContent = new Date().getFullYear();
</script>
</body></html>
